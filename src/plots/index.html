<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Benchmark Results</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h2>Benchmark Results</h2>

  <!-- Simultaneous Updates Plot -->
  <h3>Simultaneous Updates (ms)</h3>
  <canvas id="simultaneousUpdatesChart" width="400" height="200"></canvas>

  <!-- Synchronization Plot -->
  <h3>Synchronization (ms)</h3>
  <canvas id="synchronizationChart" width="400" height="200"></canvas>

  <!-- Complex Query Plot -->
  <h3>Complex Query (ms)</h3>
  <canvas id="complexQueryChart" width="400" height="200"></canvas>

  <!-- Large Dataset Query Plot -->
  <h3>Large Dataset Query (ms)</h3>
  <canvas id="largeDatasetQueryChart" width="400" height="200"></canvas>

  <script>
    const results = {
      simultaneousUpdates: {
        postgres: [
                9.961866666666683,
                9.631377777777788,
                9.961622222222225,
                8.613311111111114,
                8.806899999999992,
                8.633499999999989,
                8.401400000000017,
                8.326166666666673
                ],
        firestore: [
                21.83807777777777,
                31.167288888888883,
                25.35732222222244,
                21.997122222222263,
                21.616722222222354
                ]
      },
      synchronization: {
        postgres: [
                0.8126111111111085,
                0.6459444444444356,
                0.695844444444434,
                0.7593111111111107,
                0.5596888888888871,
                0.578022222222267,
                0.7189555555555671,
                0.6090333333333243
                ],
        firestore: [
                13.49751111111113,
                13.660433333333255,
                14.119344444444526,
                12.930011111111222,
                14.010833333333316
                ]
      },
      complexQuery: {
        postgres: [
                1.0773888888888967,
                1.4364555555555398,
                2.2078333333333324,
                4.987711111111101,
                8.926511111111116,
                18.095222222222244,
                37.47047777777771,
                74.53944444444447
                ],
        firestore: [
                30.803111111111093,
                42.805611111111176,
                54.5822555555554,
                42.8327222222222,
                39.31267777777753
                ]
      },
      largeDatasetQuery: {
        postgres: [
                3.7141555555555468,
                3.0315444444444335,
                2.80257777777778,
                2.7951111111110927,
                2.909144444444476,
                2.8120777777777572,
                2.7953666666666472,
                2.782977777777786
                ],
        firestore: [
                57.82962222222224,
                53.845766666666655,
                52.94664444444455,
                51.116599999999885,
                53.931544444444526
                ]
      }
    };

    // Labels for the x-axis (dataset sizes)
    const datasetLabels = ['ecommerce_1k', 'ecommerce_2k', 'ecommerce_4k', 'ecommerce_8k', 'ecommerce_16k', 'ecommerce_25k'];

    // Function to create a bar chart for each benchmark test
    const createChart = (canvasId, title, postgresData, firestoreData) => {
      const ctx = document.getElementById(canvasId).getContext('2d');
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: datasetLabels,  // x-axis labels
          datasets: [
            {
              label: 'PostgreSQL',
              data: postgresData,
              backgroundColor: 'rgba(54, 162, 235, 0.2)',
              borderColor: 'rgba(54, 162, 235, 1)',
              borderWidth: 1
            },
            {
              label: 'Firestore',
              data: firestoreData,
              backgroundColor: 'rgba(255, 99, 132, 0.2)',
              borderColor: 'rgba(255, 99, 132, 1)',
              borderWidth: 1
            }
          ]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true
            }
          },
          plugins: {
            title: {
              display: true,
              text: title
            }
          }
        }
      });
    };

    // Create each chart with the corresponding data
    createChart('simultaneousUpdatesChart', 'Simultaneous Updates (ms)', results.simultaneousUpdates.postgres, results.simultaneousUpdates.firestore);
    createChart('synchronizationChart', 'Synchronization (ms)', results.synchronization.postgres, results.synchronization.firestore);
    createChart('complexQueryChart', 'Complex Query (ms)', results.complexQuery.postgres, results.complexQuery.firestore);
    createChart('largeDatasetQueryChart', 'Large Dataset Query (ms)', results.largeDatasetQuery.postgres, results.largeDatasetQuery.firestore);
  </script>
</body>
</html>
